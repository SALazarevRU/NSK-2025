<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Дашборд</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
    }
    .header {
      text-align: center;
      margin-bottom: 30px;
    }
    .user-info {
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      max-width: 400px;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Добро пожаловать на дашборд!</h1>
  </div>

  <div class="user-info">
    <p><strong>Вы вошли как:</strong> <span id="userName"></span></p>
    <button onclick="logout()">Выйти</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCFSCfI1DbxAtnue8xvBLMuUED-0z_0YSs",
      authDomain: "arhiv-14cbd.firebaseapp.com",
      projectId: "arhiv-14cbd",
      storageBucket: "arhiv-14cbd.firebasestorage.app",
      messagingSenderId: "707420099995",
      appId: "1:707420099995:web:b438031ea7b1588713bd3e",
      measurementId: "G-0N51KMF3J9"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Функция для чтения куки по имени
    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
      return null;
    }

    // Функция для удаления куки
    function deleteCookie(name) {
      document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;
    }

    // Получаем имя пользователя из куки
    const userName = getCookie('userName');
    document.getElementById('userName').textContent = userName || 'Неизвестен';

    // Функция выхода
    async function logout() {
      try {
        await signOut(auth);
        deleteCookie('userName'); // Удаляем куки при выходе
        window.location.href = 'login.html';
      } catch (error) {
        console.error('Ошибка выхода:', error);
      }
    }
  </script>
</body>
</html>
